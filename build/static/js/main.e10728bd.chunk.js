(this.webpackJsonppart3=this.webpackJsonppart3||[]).push([[0],{27:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(22),c=n.n(s),o=(n(27),n(3)),i=n(2),l=n.n(i),u=n(4),d=n(6),b=n.n(d),j="/api/login",m=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(j,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(j,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(j,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f={login:m,goLike:h,getLike:p},O="/api/blogs",x=null,g=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,b.a.post(O,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,b.a.delete("".concat(O,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={getAll:function(){return b.a.get(O).then((function(e){return e.data}))},create:g,update:function(e,t){return b.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},del:v,setToken:function(e){x="bearer ".concat(e)}},N=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={createUser:N},y=n(0),S=function(e){var t=e.setSignUp,n=Object(a.useState)(""),r=Object(o.a)(n,2),s=r[0],c=r[1],i=Object(a.useState)(""),d=Object(o.a)(i,2),b=d[0],j=d[1],m=Object(a.useState)(""),p=Object(o.a)(m,2),h=p[0],f=p[1],O=Object(a.useState)(""),x=Object(o.a)(O,2),g=x[0],v=x[1],w=Object(a.useState)(null),N=Object(o.a)(w,2),S=N[0],U=N[1],C=function(){var e=Object(u.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,h!==g){e.next=11;break}return t(a={name:s,username:b,password:h}),e.next=7,k.createUser(a);case 7:c(""),j(""),f(""),v("");case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),U("Password must be same"),setTimeout((function(){U(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{className:"modal",id:"myModal",children:Object(y.jsxs)("div",{className:"modal-dialog bg-light rounded p-4",children:[Object(y.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(y.jsx)("h1",{children:"Sign Up"}),Object(y.jsx)("p",{children:"Please fill in this form to create an account."}),Object(y.jsx)("div",{className:"modal-content",children:Object(y.jsxs)("div",{className:"modal-body",children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(y.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Name",id:"name",value:s,onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(y.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Username",id:"username",value:b,onChange:function(e){var t=e.target;return j(t.value)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(y.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",id:"pwd",value:h,onChange:function(e){var t=e.target;return f(t.value)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"rptpwd",children:"Repeat Password:"}),Object(y.jsx)("input",{type:"password",className:"form-control",placeholder:"Repeat password",id:"rptpwd",value:g,onChange:function(e){var t=e.target;return v(t.value)}}),Object(y.jsxs)("span",{className:"text-warning",children:[" ",S," "]})]}),Object(y.jsx)("div",{className:"form-group form-check",children:Object(y.jsxs)("label",{className:"form-check-label",children:[Object(y.jsx)("input",{className:"form-check-input",type:"checkbox"})," Remember me"]})}),Object(y.jsxs)("p",{children:["By creating an account you agree to our ",Object(y.jsx)("span",{className:"text-info",children:"Terms & Privacy"}),"."]}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:C,"data-dismiss":"modal",children:"Submit"}),Object(y.jsx)("button",{type:"button",className:"btn btn-danger float-right","data-dismiss":"modal",children:"Cancel"})]})})]})})},U=function(e){var t=e.setUser,n=e.setSignUp,r=Object(a.useState)(""),s=Object(o.a)(r,2),c=s[0],i=s[1],d=Object(a.useState)(""),b=Object(o.a)(d,2),j=b[0],m=b[1],p=Object(a.useState)(null),h=Object(o.a)(p,2),O=h[0],x=h[1],g=function(){var e=Object(u.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f.login({username:c,password:j});case 4:a=e.sent,window.localStorage.setItem("blogLoggedUser",JSON.stringify(a)),w.setToken(a.token),t(a),i(""),m(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),x("Wrong credentials"),setTimeout((function(){x(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"container p-5 bg-secondary mt-5",children:[Object(y.jsx)("h2",{className:"text-center text-warning mb-2",children:"log in to application"}),Object(y.jsxs)("form",{className:"w-75 mx-auto bg-success p-3 rounded",onSubmit:g,children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(y.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter username",id:"username",value:c,onChange:function(e){return i(e.target.value)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(y.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",id:"pwd",value:j,onChange:function(e){return m(e.target.value)}})]}),Object(y.jsx)("button",{type:"submit",className:"btn btn-outline-info btn-light",children:"LogIn"}),Object(y.jsx)("button",{type:"button",className:"btn btn-light btn-outline-danger float-right","data-toggle":"modal","data-target":"#myModal",children:"SignUp"}),Object(y.jsx)(S,{setSignUp:n})]}),Object(y.jsx)("div",{className:"w-75 mx-auto mt-3",children:Object(y.jsxs)("strong",{children:[" ",O," "]})})]})},C=function(e){var t=e.user,n=e.setUser;return Object(y.jsxs)("div",{children:[Object(y.jsxs)("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark",children:[Object(y.jsxs)("a",{className:"navbar-brand mr-lg-auto",href:"https://polar-mountain-74733.herokuapp.com/",children:[Object(y.jsx)("img",{src:"https://static.thenounproject.com/png/215839-200.png",alt:"logo",style:{width:"50px",height:"40px"}}),"  ",Object(y.jsx)("span",{children:"ShareIdea"})]}),Object(y.jsxs)("ul",{className:"nav nav-tabs",role:"tablist",children:[Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)("a",{className:"nav-link active","data-toggle":"tab",href:"#home",children:"Home"})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)("a",{className:"nav-link","data-toggle":"tab",href:"#menu1",children:"About"})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)("a",{className:"nav-link","data-toggle":"tab",href:"#menu2",children:"Contact Us"})})]})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center justify-content-end bg-warning p-2",children:[Object(y.jsxs)("div",{className:"mr-2",children:[" ",t.name," logged in"]}),Object(y.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){window.localStorage.removeItem("blogLoggedUser"),w.setToken(null),n(null)},children:"logout"})]}),null===t&&Object(y.jsx)(U,{})]})},I=n(10),E=n(7),F=function(e){var t=e.blog,n=e.setBlog,a=e.bSet,r=e.bSetter,s=function(e){var a=e.target.name,r=e.target.value;n(Object(E.a)(Object(E.a)({},t),{},Object(I.a)({},a,r)))};return Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==t.author&&""!==t.title&&""!==t.description?w.create(t).then((function(e){r(a.concat(e)),n({author:"",title:"",description:"",like:0})})).catch((function(e){return console.log(e.response.data)})):console.log("missing content")},children:[Object(y.jsxs)("div",{className:"form-row",children:[Object(y.jsxs)("div",{className:"col",children:[Object(y.jsx)("label",{htmlFor:"blogger",className:"mr-sm-2",children:"Name:"}),Object(y.jsx)("input",{type:"text",value:t.author,onChange:s,className:"form-control",id:"blogger",placeholder:"Enter your name",name:"author"})]}),Object(y.jsxs)("div",{className:"col",children:[Object(y.jsx)("label",{htmlFor:"title",className:"mr-sm-2",children:"Title:"}),Object(y.jsx)("input",{type:"text",value:t.title,onChange:s,className:"form-control",placeholder:"Enter title",id:"title",name:"title"})]})]}),Object(y.jsx)("label",{htmlFor:"comment",className:"mb-2 mr-sm-2",children:"Description:"}),Object(y.jsx)("textarea",{onChange:s,value:t.description,className:"form-control mb-2 mr-sm-2",rows:"5",id:"comment",name:"description"}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})},L=n(13),T=function(e){var t=e.blog,n=e.setBlogArray,r=e.user,s=e.setUser,c=Object(a.useState)([]),i=Object(o.a)(c,2),d=i[0],b=i[1],j=function(){var e=Object(u.a)(l.a.mark((function e(a){var c,o,i,u,j,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getLike(r.id);case 2:return c=e.sent,b(d.splice.apply(d,[0,d.length].concat(Object(L.a)(c)))),o=t.find((function(e){return e.id===a})),i=t.findIndex((function(e){return e.id===a})),u=d.map((function(e,t){return i===t?!e:e})),b(u),d[i]?o.like-=1:o.like+=1,w.update(a,o).then((function(e){n(t.filter((function(t){return t.id!==a?t:e})))})).catch((function(e){return console.log(e.response.data)})),j=Object(L.a)(u),m=Object(E.a)(Object(E.a)({},r),{},{likes:j}),e.next=14,f.goLike(r.id,m);case 14:p=e.sent,s(p);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{className:"mt-3",children:t.map((function(e,a){return Object(y.jsxs)("div",{className:"bg-secondary rounded mb-3",children:[Object(y.jsxs)("div",{className:"toast-header",children:[Object(y.jsxs)("h3",{className:"mr-auto text-primary",children:[" ",Object(y.jsxs)("strong",{children:[" ",e.author," "]})," "]}),Object(y.jsx)("button",{className:"close",onClick:function(){return a=e.id,void(!0===window.confirm("Are you sure you want to remove it?")&&w.del(a).then((function(e){n(t.filter((function(e){return e.id!==a})))})).catch((function(e){console.log(e.response.data),alert("error: attempted by a wrong user")})));var a},children:"\xd7"})]}),Object(y.jsxs)("div",{className:"toast-body pt-0",children:[Object(y.jsxs)("h4",{children:[" ",e.title," "]}),Object(y.jsx)("div",{className:"pb-2",children:e.description}),Object(y.jsxs)("span",{className:"badge badge-pill badge-info",onClick:function(){return j(e.id)},children:[Object(y.jsx)("i",{className:"fas fa-thumbs-up"}),"  ",e.like,"   "]})]})]},a)}))})},A=function(e){var t=e.user,n=e.setUser,r=Object(a.useState)([]),s=Object(o.a)(r,2),c=s[0],i=s[1],l=Object(a.useState)({author:"",title:"",description:"",like:0}),u=Object(o.a)(l,2),d=u[0],b=u[1];return Object(a.useEffect)((function(){w.getAll().then((function(e){return i(e)}))}),[]),Object(y.jsxs)("div",{className:"tab-content mt-2",children:[Object(y.jsxs)("div",{id:"home",className:"container tab-pane active",children:[Object(y.jsx)(F,{blog:d,setBlog:b,bSet:c,bSetter:i}),Object(y.jsx)(T,{blog:c,setBlogArray:i,user:t,setUser:n})]}),Object(y.jsx)("div",{id:"menu1",className:"container tab-pane fade",children:Object(y.jsx)("p",{children:"ShareIdea\u2019s mission is to share and grow the world\u2019s knowledge. Not all knowledge can be written down, but much of that which can be, still isn't. It remains in people\u2019s heads or only accessible if you know the right people. We want to connect the people who have knowledge to the people who need it, to bring together people with different perspectives so they can understand each other better, and to empower everyone to share their knowledge for the benefit of the rest of the world."})}),Object(y.jsxs)("div",{id:"menu2",className:"container tab-pane fade",children:[Object(y.jsx)("p",{children:"email: akashsharma.zak@gmail.com "}),Object(y.jsx)("p",{children:"contact: 9625703834"})]})]})},B=function(e){var t=e.user,n=e.setUser;return Object(y.jsxs)("div",{children:[Object(y.jsx)(C,{user:t,setUser:n}),Object(y.jsx)(A,{user:t,setUser:n})]})},P=function(e){var t=e.signUp,n=e.setSignUp,a=e.setUser,r=e.user;return Object(y.jsxs)("div",{children:[null!==r&&Object(y.jsx)(D,{}),null===r&&function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),console.log("object",t),e.next=4,f.login({username:t.username,password:t.password});case 4:s=e.sent,window.localStorage.setItem("blogLoggedUser",JSON.stringify(s)),w.setToken(s.token),a(s),n(null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"container d-flex flex-column align-items-center bg-light",children:[Object(y.jsxs)("h1",{children:["Welcome ",t.name," to ShareIdea"]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("span",{onClick:e,className:"text-info",children:"Click Here"})," to go to the main page"]})]})}()]})},D=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),c=Object(o.a)(s,2),i=c[0],l=c[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("blogLoggedUser");if(e){var t=JSON.parse(e);r(t),w.setToken(t.token)}}),[]);return Object(y.jsxs)("div",{children:[null!==n&&Object(y.jsx)(B,{user:n,setUser:r}),null===n&&null==i&&Object(y.jsx)(U,{setUser:r,setSignUp:l}),null===n&&null!==i&&Object(y.jsx)(P,{signUp:i,setSignUp:l,setUser:r,user:n})]})};c.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(D,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.e10728bd.chunk.js.map
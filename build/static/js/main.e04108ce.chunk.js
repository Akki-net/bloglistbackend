(this.webpackJsonppart3=this.webpackJsonppart3||[]).push([[0],{27:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(22),s=n.n(c),o=(n(27),n(5)),i=n(2),l=n.n(i),u=n(4),d=n(6),b=n.n(d),j="/api/login",m=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(j,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(j,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(j,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f={login:m,goLike:p,getLike:h},O="/api/blogs",g=null,x=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,b.a.post(O,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,b.a.delete("".concat(O,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={getAll:function(){return b.a.get(O).then((function(e){return e.data}))},create:x,update:function(e,t){return b.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},del:v,setToken:function(e){g="bearer ".concat(e)}},N=n(0),k=function(e){var t=e.setUser,n=Object(r.useState)(""),a=Object(o.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),d=Object(o.a)(i,2),b=d[0],j=d[1],m=Object(r.useState)(null),h=Object(o.a)(m,2),p=h[0],O=h[1],g=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f.login({username:c,password:b});case 4:r=e.sent,window.localStorage.setItem("blogLoggedUser",JSON.stringify(r)),w.setToken(r.token),t(r),s(""),j(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),O("Wrong credentials"),setTimeout((function(){O(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"container p-5 bg-secondary mt-5",children:[Object(N.jsx)("h2",{className:"text-center text-warning mb-2",children:"log in to application"}),Object(N.jsxs)("form",{className:"w-75 mx-auto bg-success p-3 rounded",onSubmit:g,children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{for:"username",children:"Username:"}),Object(N.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter username",id:"username",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{for:"pwd",children:"Password:"}),Object(N.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",id:"pwd",value:b,onChange:function(e){return j(e.target.value)}})]}),Object(N.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]}),Object(N.jsx)("div",{className:"w-75 mx-auto mt-3",children:Object(N.jsxs)("strong",{children:[" ",p," "]})})]})},y=function(e){var t=e.user,n=e.setUser;return Object(N.jsxs)("div",{children:[Object(N.jsxs)("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark",children:[Object(N.jsxs)("a",{className:"navbar-brand mr-lg-auto",href:"https://polar-mountain-74733.herokuapp.com/",children:[Object(N.jsx)("img",{src:"https://static.thenounproject.com/png/215839-200.png",alt:"logo",style:{width:"50px",height:"40px"}}),"  ",Object(N.jsx)("span",{children:"ShareIdea"})]}),Object(N.jsxs)("ul",{className:"nav nav-tabs",role:"tablist",children:[Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)("a",{className:"nav-link active","data-toggle":"tab",href:"#home",children:"Home"})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)("a",{className:"nav-link","data-toggle":"tab",href:"#menu1",children:"About"})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)("a",{className:"nav-link","data-toggle":"tab",href:"#menu2",children:"Contact Us"})})]})]}),Object(N.jsxs)("div",{className:"d-flex align-items-center justify-content-end bg-warning p-2",children:[Object(N.jsxs)("div",{className:"mr-2",children:[" ",t.name," logged in"]}),Object(N.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){window.localStorage.removeItem("blogLoggedUser"),w.setToken(null),n(null)},children:"logout"})]}),null===t&&Object(N.jsx)(k,{})]})},S=n(10),U=n(7),C=function(e){var t=e.blog,n=e.setBlog,r=e.bSet,a=e.bSetter,c=function(e){var r=e.target.name,a=e.target.value;n(Object(U.a)(Object(U.a)({},t),{},Object(S.a)({},r,a)))};return Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==t.author&&""!==t.title&&""!==t.description?w.create(t).then((function(e){a(r.concat(e)),n({author:"",title:"",description:"",like:0})})).catch((function(e){return console.log(e.response.data)})):console.log("missing content")},children:[Object(N.jsxs)("div",{className:"form-row",children:[Object(N.jsxs)("div",{className:"col",children:[Object(N.jsx)("label",{htmlFor:"blogger",className:"mr-sm-2",children:"Name:"}),Object(N.jsx)("input",{type:"text",value:t.author,onChange:c,className:"form-control",id:"blogger",placeholder:"Enter your name",name:"author"})]}),Object(N.jsxs)("div",{className:"col",children:[Object(N.jsx)("label",{htmlFor:"title",className:"mr-sm-2",children:"Title:"}),Object(N.jsx)("input",{type:"text",value:t.title,onChange:c,className:"form-control",placeholder:"Enter title",id:"title",name:"title"})]})]}),Object(N.jsx)("label",{htmlFor:"comment",className:"mb-2 mr-sm-2",children:"Description:"}),Object(N.jsx)("textarea",{onChange:c,value:t.description,className:"form-control mb-2 mr-sm-2",rows:"5",id:"comment",name:"description"}),Object(N.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})},A=n(13),I=function(e){var t=e.blog,n=e.setBlogArray,a=e.user,c=e.setUser,s=Object(r.useState)([]),i=Object(o.a)(s,2),d=i[0],b=i[1],j=function(){var e=Object(u.a)(l.a.mark((function e(r){var s,o,i,u,j,m,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getLike(a.id);case 2:return s=e.sent,b(d.splice.apply(d,[0,d.length].concat(Object(A.a)(s)))),o=t.find((function(e){return e.id===r})),i=t.findIndex((function(e){return e.id===r})),u=d.map((function(e,t){return i===t?!e:e})),b(u),d[i]?o.like-=1:o.like+=1,w.update(r,o).then((function(e){n(t.filter((function(t){return t.id!==r?t:e})))})).catch((function(e){return console.log(e.response.data)})),j=Object(A.a)(u),m=Object(U.a)(Object(U.a)({},a),{},{likes:j}),e.next=14,f.goLike(a.id,m);case 14:h=e.sent,c(h);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{className:"mt-3",children:t.map((function(e,r){return Object(N.jsxs)("div",{className:"bg-secondary rounded mb-3",children:[Object(N.jsxs)("div",{className:"toast-header",children:[Object(N.jsxs)("h3",{className:"mr-auto text-primary",children:[" ",Object(N.jsxs)("strong",{children:[" ",e.author," "]})," "]}),Object(N.jsx)("button",{className:"close",onClick:function(){return r=e.id,void(!0===window.confirm("Are you sure you want to remove it?")&&w.del(r).then((function(e){n(t.filter((function(e){return e.id!==r})))})).catch((function(e){console.log(e.response.data),alert("error: attempted by a wrong user")})));var r},children:"\xd7"})]}),Object(N.jsxs)("div",{className:"toast-body pt-0",children:[Object(N.jsxs)("h4",{children:[" ",e.title," "]}),Object(N.jsx)("div",{className:"pb-2",children:e.description}),Object(N.jsxs)("span",{className:"badge badge-pill badge-info",onClick:function(){return j(e.id)},children:[Object(N.jsx)("i",{className:"fas fa-thumbs-up"}),"  ",e.like,"   "]})]})]},r)}))})},E=function(e){var t=e.user,n=e.setUser,a=Object(r.useState)([]),c=Object(o.a)(a,2),s=c[0],i=c[1],l=Object(r.useState)({author:"",title:"",description:"",like:0}),u=Object(o.a)(l,2),d=u[0],b=u[1];return Object(r.useEffect)((function(){w.getAll().then((function(e){return i(e)}))}),[]),Object(N.jsxs)("div",{className:"tab-content mt-2",children:[Object(N.jsxs)("div",{id:"home",className:"container tab-pane active",children:[Object(N.jsx)(C,{blog:d,setBlog:b,bSet:s,bSetter:i}),Object(N.jsx)(I,{blog:s,setBlogArray:i,user:t,setUser:n})]}),Object(N.jsx)("div",{id:"menu1",className:"container tab-pane fade",children:Object(N.jsx)("p",{children:"ShareIdea\u2019s mission is to share and grow the world\u2019s knowledge. Not all knowledge can be written down, but much of that which can be, still isn't. It remains in people\u2019s heads or only accessible if you know the right people. We want to connect the people who have knowledge to the people who need it, to bring together people with different perspectives so they can understand each other better, and to empower everyone to share their knowledge for the benefit of the rest of the world."})}),Object(N.jsxs)("div",{id:"menu2",className:"container tab-pane fade",children:[Object(N.jsx)("p",{children:"email: akashsharma.zak@gmail.com "}),Object(N.jsx)("p",{children:"contact: 9625703834"})]})]})},L=function(e){var t=e.user,n=e.setUser;return Object(N.jsxs)("div",{children:[Object(N.jsx)(y,{user:t,setUser:n}),Object(N.jsx)(E,{user:t,setUser:n})]})},T=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("blogLoggedUser");if(e){var t=JSON.parse(e);a(t),w.setToken(t.token)}}),[]);return Object(N.jsxs)("div",{children:[null!==n&&Object(N.jsx)(L,{user:n,setUser:a}),null===n&&Object(N.jsx)(k,{setUser:a})]})};s.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(T,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.e04108ce.chunk.js.map